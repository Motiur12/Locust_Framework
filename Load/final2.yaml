host: "https://reqres.in"
api_key: &reqres_key "reqres-free-v1"

users:
  - name: customer
    
    weight: 6
    wait_time: [1, 3]
    sequential: true

    tasks:
      - name: "Get and Use User"
        weight: 1
        subtasks:
          - method: GET
            endpoint: "/api/users"
            params:
              page: 2
            headers:
              x-api-key: *reqres_key
            extract:
              - from: "json"
                field: "data[0].id"
                save_as: "user_idget"
            print_response: true

          - method: GET
            endpoint: "/api/users/{{user_idget}}"
            headers:
              x-api-key: *reqres_key
            print_response: true

  - name: admin
    
    weight: 3
    wait_time: [2, 5]
    sequential: true

    tasks:
      - name: "Create User"
        weight: 1
        subtasks:
          - method: POST
            endpoint: "/api/users"
            payload:
              name: "motiur"
              job: "QA Engineer"
            headers:
              Content-Type: "application/json"
              x-api-key: *reqres_key
            extract:
              - from: "json"
                field: "id"
                save_as: "user_id"
            print_response: true
