<!DOCTYPE html>
<html>
<head>
  <title>Locust User GUI</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      margin: 0; padding: 0;
      height: 100vh;
      background: #f0f2f5;
    }
    nav {
      width: 200px;
      background: #2c3e50;
      color: white;
      display: flex;
      flex-direction: column;
      padding: 10px;
    }
    nav button {
      background: #34495e;
      border: none;
      color: white;
      padding: 10px;
      margin: 5px 0;
      cursor: pointer;
      font-size: 16px;
      border-radius: 4px;
      transition: background-color 0.3s;
      text-align: left;
      width: 100%;
    }
    nav button:hover {
      background: #1abc9c;
    }
    nav button.active {
      background: #16a085;
    }
    /* Parent User Class button style */
    #btnUserClass {
      font-weight: bold;
      position: relative;
    }
    /* Arrow indicator */
    #btnUserClass::after {
      content: "â–¼";
      position: absolute;
      right: 10px;
      font-size: 12px;
      transition: transform 0.3s ease;
    }
    #btnUserClass.expanded::after {
      transform: rotate(-180deg);
    }
    /* Submenu styling */
    .submenu {
      display: none;
      flex-direction: column;
      margin-left: 15px;
    }
    .submenu.show {
      display: flex;
    }
    /* Submenu buttons smaller font */
    .submenu button {
      font-size: 14px;
      background: #3b556f;
    }
    .submenu button:hover {
      background: #1abc9c;
    }
    main {
      flex-grow: 1;
      padding: 20px;
      overflow-y: auto;
    }
    .hidden {
      display: none;
    }
    .message {
      padding: 10px;
      margin-bottom: 10px;
      color: white;
      background-color: #e74c3c;
      border-radius: 4px;
    }
    ul {
      list-style-type: none;
      padding-left: 0;
    }
    ul li {
      padding: 6px 0;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #ddd;
    }
    ul li button {
      background: #e74c3c;
      border: none;
      color: white;
      padding: 4px 8px;
      cursor: pointer;
      border-radius: 3px;
      font-size: 14px;
      transition: background-color 0.3s;
    }
    ul li button:hover {
      background: #c0392b;
    }
    form input, form button {
      padding: 6px;
      margin: 6px 0;
      font-size: 14px;
      width: 100%;
      box-sizing: border-box;
    }
    form button {
      background: #1abc9c;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 4px;
      transition: background-color 0.3s;
    }
    form button:hover {
      background: #16a085;
    }
  </style>
</head>
<body>

  <nav>
    <button id="btnUserClass">User Class</button>
    <div id="userClassSubmenu" class="submenu">
      <button id="btnUserList" class="active">User Classes List</button>
      <button id="btnCreateUser">Create User Class</button>
    </div>
  </nav>

  <main>
    <!-- Message display -->
    {% if message %}
      <div class="message">{{ message }}</div>
    {% endif %}

    <!-- User Classes List -->
    <section id="userListSection">
      <h2>User Classes</h2>
      {% if user_classes %}
        <ul>
          {% for user in user_classes %}
            <li>
              {{ user }}
              <form method="POST" action="/delete_user/{{ user }}" style="margin:0;">
                <button type="submit" onclick="return confirm('Delete user class {{ user }}?')">Delete</button>
              </form>
            </li>
          {% endfor %}
        </ul>
      {% else %}
        <p>No user classes found.</p>
      {% endif %}
    </section>

    <!-- Create User Class Form -->
    <section id="createUserSection" class="hidden">
      <h2>Create a New User Class</h2>
      <form method="POST" action="/create_user">
        <label>Class Name:<br><input name="classname" required></label><br>
        <label>Wait Time Min:<br><input name="wait_min" type="number" value="5"></label><br>
        <label>Wait Time Max:<br><input name="wait_max" type="number" value="10"></label><br>
        <label>Page Class:<br><input name="page_class" value="ListPage"></label><br>
        <label>Task Name:<br><input name="task_name" value="get_list_of_users"></label><br>
        <button type="submit">Create User</button>
      </form>
    </section>
  </main>

  <script>
    const btnUserClass = document.getElementById('btnUserClass');
    const userClassSubmenu = document.getElementById('userClassSubmenu');
    const btnUserList = document.getElementById('btnUserList');
    const btnCreateUser = document.getElementById('btnCreateUser');

    const userListSection = document.getElementById('userListSection');
    const createUserSection = document.getElementById('createUserSection');

    function setActive(button) {
      btnUserList.classList.remove('active');
      btnCreateUser.classList.remove('active');
      button.classList.add('active');
    }

    // Toggle submenu visibility on parent button click
    btnUserClass.onclick = () => {
      const isShown = userClassSubmenu.classList.toggle('show');
      btnUserClass.classList.toggle('expanded', isShown);
    };

    btnUserList.onclick = () => {
      userListSection.classList.remove('hidden');
      createUserSection.classList.add('hidden');
      setActive(btnUserList);
    };

    btnCreateUser.onclick = () => {
      createUserSection.classList.remove('hidden');
      userListSection.classList.add('hidden');
      setActive(btnCreateUser);
    };

    // Show submenu and User Classes List on page load
    userClassSubmenu.classList.add('show');
    btnUserClass.classList.add('expanded');
    userListSection.classList.remove('hidden');
    createUserSection.classList.add('hidden');
  </script>

</body>
</html>
